<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Escolha o NÃ­vel</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/pagina_nivel/nivel.css') }}">
</head>
<body class="body_nivel">

  <!-- VÃ­deo de fundo -->
  <video id="bg-video" autoplay muted loop playsinline>
    <source src="{{ url_for('static', filename='video/vd.mp4') }}" type="video/mp4">
  </video>

  <!-- MÃºsica de fundo -->
  <audio id="bgmusic" autoplay loop preload="auto" playsinline>
    <source src="{{ url_for('static', filename='audio/audio_nivel.mp3') }}" type="audio/mpeg">
  </audio>

  <!-- BotÃ£o de mute -->
  <button id="toggleMute" class="botao-mudo" aria-label="Alternar som">ðŸ”Š</button>

  <div class="container_nivel">
    <h1 class="h1_nivel">ðŸŽ¯ Escolha o NÃ­vel de Dificuldade</h1>
    <form action="{{ url_for('iniciar') }}" method="POST" class="options">
      <button type="submit" name="nivel" value="Facil">ðŸŸ¢ Facil:Tabuada de 1 Algarismo </button>
      <button type="submit" name="nivel" value="medio">ðŸŸ¡ MÃ©dio:Tabuada de 2 Algarismo </button>
      <button type="submit" name="nivel" value="dificil">ðŸŸ  DifÃ­cil:Tabuada de 3 Algarismo (+,-) </button>
      <button type="submit" name="nivel" value="Extremo">ðŸ”´ Extremo:Tabuada de 3 Algarismo (+,-,/,*) </button>
    </form>
  </div>

<script>
  const musica = document.getElementById('bgmusic');
  const botao  = document.getElementById('toggleMute');
  const APP_SOUND_KEY = 'app_sound_enabled';
  const VOLUME = 0.35;

  // estado inicial baseado na preferÃªncia global
  let enabled = (localStorage.getItem(APP_SOUND_KEY) ?? 'on') === 'on';
  musica.volume = VOLUME;
  musica.muted  = !enabled;

  // tenta tocar; se bloquear, vida que segue
  try { musica.play().catch(()=>{}); } catch(e){}

  botao.textContent = musica.muted ? 'ðŸ”‡' : 'ðŸ”Š';

  // toggle que atualiza a preferÃªncia global
  botao.addEventListener('click', async () => {
    if (musica.paused) { try { await musica.play(); } catch(e){} }
    musica.muted = !musica.muted;
    enabled = !musica.muted;
    localStorage.setItem(APP_SOUND_KEY, enabled ? 'on' : 'off');
    botao.textContent = musica.muted ? 'ðŸ”‡' : 'ðŸ”Š';
  });
</script>


<style>
  .botao-mudo {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 55px;
    height: 55px;
    font-size: 25px;
    border-radius: 50%;
    background: rgba(255,255,255,0.8);
    border: 2px solid #000;
    cursor: pointer;
    z-index: 999;
  }
</style>

</body>
</html>
